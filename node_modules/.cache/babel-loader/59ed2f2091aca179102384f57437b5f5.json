{"ast":null,"code":"var _jsxFileName = \"D:\\\\Office-Work\\\\Panel\\\\buzzingo_panel-master\\\\src\\\\component\\\\TravelLogin.js\";\nimport React, { Component } from 'react';\nimport logo2 from \"../component/assets/images/BuzzinGO.png\";\nimport { Serverurl, ServerurllogRegister } from '../Common/ServerUrl';\nimport axios from 'axios';\nimport Button from 'reactstrap-button-loader';\nexport class TravelLogin extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleEmailChange = event => {\n      this.setState({\n        [event.target.name]: event.target.value,\n        errorText: ''\n      });\n    };\n\n    this.onKeyDown = event => {\n      // 'keypress' event misbehaves on mobile so we track 'Enter' key via 'keydown' event\n      if (event.key === 'Enter') {\n        event.preventDefault();\n        event.stopPropagation();\n        this.Login();\n      }\n    };\n\n    this.state = {\n      data: [],\n      email: '',\n      password: '',\n      errorText: '',\n      emailError: '',\n      passwordError: '',\n      errors: '',\n      loading: false\n    };\n  }\n\n  emailInput(e) {\n    this.setState({\n      email: e.target.value\n    });\n  }\n\n  PasswordInput(e) {\n    this.setState({\n      password: e.target.value,\n      errorText: ''\n    });\n  }\n\n  Login(e) {\n    var data;\n    e.preventDefault();\n    var validation = true;\n    const emailsyntax = /^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/;\n\n    if (this.state.password == \"\") {\n      this.setState({\n        errorText: \"*Password is required\"\n      });\n      validation = false;\n    }\n\n    if (!emailsyntax.test(this.state.email)) {\n      validation = false;\n      this.setState({\n        errorText: '* Incorrect Email format.'\n      });\n    }\n\n    if (this.state.email == \"\") {\n      this.setState({\n        errorText: \"*Email is required\"\n      });\n      validation = false;\n    }\n\n    if (validation == true) {\n      var data = {\n        'email': this.state.email,\n        'password': this.state.password\n      };\n      this.setState({\n        loading: true\n      });\n      var error = document.getElementById('err');\n\n      if (this.state.email === '' || this.state.password === '') {\n        this.setState({\n          error: 'Please fill fields carefully'\n        });\n        error.classList.add('errorMsg');\n        setTimeout(() => {\n          error.classList.remove('errorMsg');\n          this.setState({\n            error: ''\n          });\n        }, 3000);\n      } else {\n        var data;\n        axios({\n          method: 'post',\n          url: Serverurl + 'login',\n          data: data\n        }).then(res => {\n          console.log('res', res.data.data);\n          console.log('Token', res.data.data.access_token);\n          localStorage.setItem('token', res.data.data.access_token);\n          window.location.href = \"/component/Dashboard\";\n          this.setState({\n            data: res.data.data,\n            loading: false\n          });\n\n          if (res.data.status === true) {\n            localStorage.setItem(\"userId\", res.data.access_token);\n            localStorage.setItem(\"email\", res.data.email);\n            localStorage.setItem('data', res.data.data);\n          }\n\n          localStorage.setItem(\"userId\", res.data.data.access_token); // axios({\n          //     method: 'get',\n          //     url: Serverurl + 'user',\n          //     headers: {\n          //         Authorization: 'Bearer' + ' ' + res.data.data.access_token\n          //     }\n          // })\n          //     .then((response) => {\n          //         console.log('User', response.data.data)\n          //         // console.log(\"Type:\", response.data.data.user_type)\n          //         console.log(\"userId:\", response.data.data.id)\n          //         this.setState((res) => {\n          //             if (res.status == false) {\n          //                 this.setState({\n          //                     errorText: data.message\n          //                 })\n          //                 if (data.errors) {\n          //                     if (data.errors.email) {\n          //                         if (data.errors.email.ERR_00001) {\n          //                             this.setState({\n          //                                 emailError: '* Email is required'\n          //                             })\n          //                         }\n          //                         if (data.errors.email.ERR_00005) {\n          //                             this.setState({\n          //                                 emailError: '* Email is invalid'\n          //                             })\n          //                         }\n          //                     }\n          //                     if (data.errors.password) {\n          //                         if (data.errors.password.ERR_00001) {\n          //                             this.setState({\n          //                                 passwordError: '* Password is required'\n          //                             })\n          //                         }\n          //                     }\n          //                 }\n          //             }\n          //         })\n          //     })\n          //     .catch((val) => {\n          //         console.log(\"error:\", val)\n          //     })\n        }).catch(err => {\n          console.log({\n            err\n          });\n\n          if (err) {\n            error.classList.add('errorMsg');\n            this.setState({\n              error: 'Login Failed! Please try again',\n              loading: true\n            });\n            error.classList.add('errorMsg');\n            setTimeout(() => {\n              error.classList.remove('errorMsg');\n              this.setState({\n                error: '',\n                loading: false\n              });\n            }, 3000);\n          }\n        });\n      }\n    }\n  }\n\n  render() {\n    // var userId = localStorage.getItem('/');\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"accountbg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"wrapper-page\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card-body\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"text-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      className: \"logo logo-admin\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: logo2,\n      height: \"60\",\n      alt: \"logo\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 68\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"px-3 pb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      className: \"form-horizontal m-t-20\",\n      action: \"index.html\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 41\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 45\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      className: \"form-control\",\n      type: \"email\",\n      name: \"email\",\n      onChange: this.handleEmailChange.bind(this),\n      placeholder: \"Email\",\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 49\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 41\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 45\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      className: \"form-control\",\n      type: \"password\",\n      name: \"password\",\n      onChange: this.PasswordInput.bind(this),\n      placeholder: \"Password\",\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 49\n      }\n    }))), this.state.errorText ? /*#__PURE__*/React.createElement(\"p\", {\n      style: {\n        color: 'red'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 245,\n        columnNumber: 45\n      }\n    }, this.state.errorText) : null, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group text-center row m-t-20\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 41\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 249,\n        columnNumber: 45\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-danger btn-block waves-effect waves-light\",\n      type: \"submit\",\n      onClick: this.Login.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 250,\n        columnNumber: 49\n      }\n    }, \"Log In\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group m-t-10 mb-0 row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 41\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-sm-12 m-t-20 my-forgot\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 255,\n        columnNumber: 45\n      }\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      href: \"/component/TravelForgot\",\n      className: \"text-muted\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 256,\n        columnNumber: 49\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"mdi mdi-lock\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 256,\n        columnNumber: 106\n      }\n    }), \" \", /*#__PURE__*/React.createElement(\"small\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 256,\n        columnNumber: 139\n      }\n    }, \"Forgot your password ?\")))))))))));\n  }\n\n}\nexport default TravelLogin;","map":{"version":3,"sources":["D:/Office-Work/Panel/buzzingo_panel-master/src/component/TravelLogin.js"],"names":["React","Component","logo2","Serverurl","ServerurllogRegister","axios","Button","TravelLogin","constructor","props","handleEmailChange","event","setState","target","name","value","errorText","onKeyDown","key","preventDefault","stopPropagation","Login","state","data","email","password","emailError","passwordError","errors","loading","emailInput","e","PasswordInput","validation","emailsyntax","test","error","document","getElementById","classList","add","setTimeout","remove","method","url","then","res","console","log","access_token","localStorage","setItem","window","location","href","status","catch","err","render","bind","color"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,KAAP,MAAkB,yCAAlB;AACA,SAASC,SAAT,EAAoBC,oBAApB,QAAgD,qBAAhD;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,0BAAnB;AAEA,OAAO,MAAMC,WAAN,SAA0BN,SAA1B,CAAoC;AACvCO,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACf,UAAMA,KAAN;;AADe,SAsBnBC,iBAtBmB,GAsBEC,KAAD,IAAW;AAC3B,WAAKC,QAAL,CAAc;AACV,SAACD,KAAK,CAACE,MAAN,CAAaC,IAAd,GAAqBH,KAAK,CAACE,MAAN,CAAaE,KADxB;AAEVC,QAAAA,SAAS,EAAE;AAFD,OAAd;AAIH,KA3BkB;;AAAA,SAsMnBC,SAtMmB,GAsMNN,KAAD,IAAW;AACnB;AACA,UAAIA,KAAK,CAACO,GAAN,KAAc,OAAlB,EAA2B;AACvBP,QAAAA,KAAK,CAACQ,cAAN;AACAR,QAAAA,KAAK,CAACS,eAAN;AACA,aAAKC,KAAL;AACH;AACJ,KA7MkB;;AAEf,SAAKC,KAAL,GAAa;AACTC,MAAAA,IAAI,EAAE,EADG;AAETC,MAAAA,KAAK,EAAE,EAFE;AAGTC,MAAAA,QAAQ,EAAE,EAHD;AAITT,MAAAA,SAAS,EAAE,EAJF;AAKTU,MAAAA,UAAU,EAAE,EALH;AAMTC,MAAAA,aAAa,EAAE,EANN;AAOTC,MAAAA,MAAM,EAAE,EAPC;AAQTC,MAAAA,OAAO,EAAE;AARA,KAAb;AAUH;;AAEDC,EAAAA,UAAU,CAACC,CAAD,EAAI;AACV,SAAKnB,QAAL,CAAc;AACVY,MAAAA,KAAK,EAAEO,CAAC,CAAClB,MAAF,CAASE;AADN,KAAd;AAGH;;AAYDiB,EAAAA,aAAa,CAACD,CAAD,EAAI;AACb,SAAKnB,QAAL,CAAc;AACVa,MAAAA,QAAQ,EAAEM,CAAC,CAAClB,MAAF,CAASE,KADT;AAEVC,MAAAA,SAAS,EAAE;AAFD,KAAd;AAIH;;AAGDK,EAAAA,KAAK,CAACU,CAAD,EAAI;AAEL,QAAIR,IAAJ;AAEAQ,IAAAA,CAAC,CAACZ,cAAF;AACA,QAAIc,UAAU,GAAG,IAAjB;AAEA,UAAMC,WAAW,GAAG,+CAApB;;AAEA,QAAI,KAAKZ,KAAL,CAAWG,QAAX,IAAuB,EAA3B,EAA+B;AAC3B,WAAKb,QAAL,CAAc;AACVI,QAAAA,SAAS,EAAE;AADD,OAAd;AAGAiB,MAAAA,UAAU,GAAG,KAAb;AACH;;AAED,QAAI,CAACC,WAAW,CAACC,IAAZ,CAAiB,KAAKb,KAAL,CAAWE,KAA5B,CAAL,EAAyC;AACrCS,MAAAA,UAAU,GAAG,KAAb;AACA,WAAKrB,QAAL,CAAc;AACVI,QAAAA,SAAS,EAAE;AADD,OAAd;AAGH;;AAED,QAAI,KAAKM,KAAL,CAAWE,KAAX,IAAoB,EAAxB,EAA4B;AACxB,WAAKZ,QAAL,CAAc;AACVI,QAAAA,SAAS,EAAE;AADD,OAAd;AAGAiB,MAAAA,UAAU,GAAG,KAAb;AACH;;AAID,QAAIA,UAAU,IAAI,IAAlB,EAAwB;AAEpB,UAAIV,IAAI,GAAG;AACP,iBAAS,KAAKD,KAAL,CAAWE,KADb;AAEP,oBAAY,KAAKF,KAAL,CAAWG;AAFhB,OAAX;AAKA,WAAKb,QAAL,CAAc;AACViB,QAAAA,OAAO,EAAE;AADC,OAAd;AAIA,UAAIO,KAAK,GAAGC,QAAQ,CAACC,cAAT,CAAwB,KAAxB,CAAZ;;AACA,UAAI,KAAKhB,KAAL,CAAWE,KAAX,KAAqB,EAArB,IAA2B,KAAKF,KAAL,CAAWG,QAAX,KAAwB,EAAvD,EAA2D;AACvD,aAAKb,QAAL,CAAc;AACVwB,UAAAA,KAAK,EAAE;AADG,SAAd;AAGAA,QAAAA,KAAK,CAACG,SAAN,CAAgBC,GAAhB,CAAoB,UAApB;AACAC,QAAAA,UAAU,CAAC,MAAM;AACbL,UAAAA,KAAK,CAACG,SAAN,CAAgBG,MAAhB,CAAuB,UAAvB;AACA,eAAK9B,QAAL,CAAc;AACVwB,YAAAA,KAAK,EAAE;AADG,WAAd;AAGH,SALS,EAKP,IALO,CAAV;AAMH,OAXD,MAWO;AACH,YAAIb,IAAJ;AACAlB,QAAAA,KAAK,CAAC;AACFsC,UAAAA,MAAM,EAAE,MADN;AAEFC,UAAAA,GAAG,EAAEzC,SAAS,GAAG,OAFf;AAGFoB,UAAAA,IAAI,EAAEA;AAHJ,SAAD,CAAL,CAKKsB,IALL,CAKUC,GAAG,IAAI;AACTC,UAAAA,OAAO,CAACC,GAAR,CAAY,KAAZ,EAAmBF,GAAG,CAACvB,IAAJ,CAASA,IAA5B;AACAwB,UAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAqBF,GAAG,CAACvB,IAAJ,CAASA,IAAT,CAAc0B,YAAnC;AACAC,UAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BL,GAAG,CAACvB,IAAJ,CAASA,IAAT,CAAc0B,YAA5C;AACAG,UAAAA,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAuB,sBAAvB;AAEA,eAAK1C,QAAL,CAAc;AACVW,YAAAA,IAAI,EAAEuB,GAAG,CAACvB,IAAJ,CAASA,IADL;AAEVM,YAAAA,OAAO,EAAE;AAFC,WAAd;;AAIA,cAAIiB,GAAG,CAACvB,IAAJ,CAASgC,MAAT,KAAoB,IAAxB,EAA8B;AAE1BL,YAAAA,YAAY,CAACC,OAAb,CAAqB,QAArB,EAA+BL,GAAG,CAACvB,IAAJ,CAAS0B,YAAxC;AACAC,YAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BL,GAAG,CAACvB,IAAJ,CAASC,KAAvC;AACA0B,YAAAA,YAAY,CAACC,OAAb,CAAqB,MAArB,EAA6BL,GAAG,CAACvB,IAAJ,CAASA,IAAtC;AACH;;AAGD2B,UAAAA,YAAY,CAACC,OAAb,CAAqB,QAArB,EAA+BL,GAAG,CAACvB,IAAJ,CAASA,IAAT,CAAc0B,YAA7C,EAlBS,CAqBT;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAGH,SA/EL,EAgFKO,KAhFL,CAgFYC,GAAD,IAAS;AACZV,UAAAA,OAAO,CAACC,GAAR,CAAY;AAAES,YAAAA;AAAF,WAAZ;;AACA,cAAIA,GAAJ,EAAS;AACLrB,YAAAA,KAAK,CAACG,SAAN,CAAgBC,GAAhB,CAAoB,UAApB;AACA,iBAAK5B,QAAL,CAAc;AACVwB,cAAAA,KAAK,EAAE,gCADG;AAEVP,cAAAA,OAAO,EAAE;AAFC,aAAd;AAIAO,YAAAA,KAAK,CAACG,SAAN,CAAgBC,GAAhB,CAAoB,UAApB;AACAC,YAAAA,UAAU,CAAC,MAAM;AACbL,cAAAA,KAAK,CAACG,SAAN,CAAgBG,MAAhB,CAAuB,UAAvB;AACA,mBAAK9B,QAAL,CAAc;AACVwB,gBAAAA,KAAK,EAAE,EADG;AAEVP,gBAAAA,OAAO,EAAE;AAFC,eAAd;AAIH,aANS,EAMP,IANO,CAAV;AAOH;AACJ,SAjGL;AAmGH;AACJ;AACJ;;AAWD6B,EAAAA,MAAM,GAAG;AACL;AACA,wBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAK,MAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,eAEI;AAAK,MAAA,SAAS,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAK,MAAA,SAAS,EAAC,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAK,MAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAEI;AAAK,MAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAG,MAAA,SAAS,EAAC,iBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAA+B;AAAK,MAAA,GAAG,EAAExD,KAAV;AAAiB,MAAA,MAAM,EAAC,IAAxB;AAA6B,MAAA,GAAG,EAAC,MAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAA/B,CADJ,CAFJ,eAMI;AAAK,MAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAM,MAAA,SAAS,EAAC,wBAAhB;AAAyC,MAAA,MAAM,EAAC,YAAhD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAEI;AAAK,MAAA,SAAS,EAAC,gBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAK,MAAA,SAAS,EAAC,QAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAO,MAAA,SAAS,EAAC,cAAjB;AAAgC,MAAA,IAAI,EAAC,OAArC;AAA6C,MAAA,IAAI,EAAC,OAAlD;AAA0D,MAAA,QAAQ,EAAE,KAAKQ,iBAAL,CAAuBiD,IAAvB,CAA4B,IAA5B,CAApE;AAAuG,MAAA,WAAW,EAAC,OAAnH;AAA2H,MAAA,QAAQ,MAAnI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,CADJ,CAFJ,eAQI;AAAK,MAAA,SAAS,EAAC,gBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAK,MAAA,SAAS,EAAC,QAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAO,MAAA,SAAS,EAAC,cAAjB;AAAgC,MAAA,IAAI,EAAC,UAArC;AAAgD,MAAA,IAAI,EAAC,UAArD;AAAgE,MAAA,QAAQ,EAAE,KAAK3B,aAAL,CAAmB2B,IAAnB,CAAwB,IAAxB,CAA1E;AAAyG,MAAA,WAAW,EAAC,UAArH;AAAgI,MAAA,QAAQ,MAAxI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,CADJ,CARJ,EAcK,KAAKrC,KAAL,CAAWN,SAAX,gBACG;AAAG,MAAA,KAAK,EAAE;AAAE4C,QAAAA,KAAK,EAAE;AAAT,OAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAA6B,KAAKtC,KAAL,CAAWN,SAAxC,CADH,GAEK,IAhBV,eAkBI;AAAK,MAAA,SAAS,EAAC,mCAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAK,MAAA,SAAS,EAAC,QAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAQ,MAAA,SAAS,EAAC,mDAAlB;AAAsE,MAAA,IAAI,EAAC,QAA3E;AAAoF,MAAA,OAAO,EAAE,KAAKK,KAAL,CAAWsC,IAAX,CAAgB,IAAhB,CAA7F;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADJ,CADJ,CAlBJ,eAwBI;AAAK,MAAA,SAAS,EAAC,4BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAK,MAAA,SAAS,EAAC,4BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAG,MAAA,IAAI,EAAC,yBAAR;AAAkC,MAAA,SAAS,EAAC,YAA5C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAAyD;AAAG,MAAA,SAAS,EAAC,cAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAzD,oBAA0F;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gCAA1F,CADJ,CADJ,CAxBJ,CADJ,CANJ,CADJ,CADJ,CAFJ,CADJ,CADJ;AAqDH;;AAvQsC;AA0Q3C,eAAepD,WAAf","sourcesContent":["import React, { Component } from 'react'\nimport logo2 from \"../component/assets/images/BuzzinGO.png\";\nimport { Serverurl, ServerurllogRegister } from '../Common/ServerUrl';\nimport axios from 'axios';\nimport Button from 'reactstrap-button-loader';\n\nexport class TravelLogin extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            data: [],\n            email: '',\n            password: '',\n            errorText: '',\n            emailError: '',\n            passwordError: '',\n            errors: '',\n            loading: false\n        }\n    }\n\n    emailInput(e) {\n        this.setState({\n            email: e.target.value\n        })\n    }\n\n\n\n    handleEmailChange = (event) => {\n        this.setState({\n            [event.target.name]: event.target.value,\n            errorText: ''\n        })\n    }\n\n\n    PasswordInput(e) {\n        this.setState({\n            password: e.target.value,\n            errorText: ''\n        })\n    }\n\n\n    Login(e) {\n\n        var data;\n\n        e.preventDefault();\n        var validation = true;\n\n        const emailsyntax = /^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/;\n\n        if (this.state.password == \"\") {\n            this.setState({\n                errorText: \"*Password is required\"\n            })\n            validation = false;\n        }\n\n        if (!emailsyntax.test(this.state.email)) {\n            validation = false;\n            this.setState({\n                errorText: '* Incorrect Email format.'\n            })\n        }\n\n        if (this.state.email == \"\") {\n            this.setState({\n                errorText: \"*Email is required\"\n            })\n            validation = false;\n        }\n\n\n\n        if (validation == true) {\n\n            var data = {\n                'email': this.state.email,\n                'password': this.state.password\n            }\n\n            this.setState({\n                loading: true\n            })\n\n            var error = document.getElementById('err');\n            if (this.state.email === '' || this.state.password === '') {\n                this.setState({\n                    error: 'Please fill fields carefully'\n                })\n                error.classList.add('errorMsg');\n                setTimeout(() => {\n                    error.classList.remove('errorMsg')\n                    this.setState({\n                        error: ''\n                    })\n                }, 3000)\n            } else {\n                var data;\n                axios({\n                    method: 'post',\n                    url: Serverurl + 'login',\n                    data: data,\n                })\n                    .then(res => {\n                        console.log('res', res.data.data)\n                        console.log('Token', res.data.data.access_token)\n                        localStorage.setItem('token', res.data.data.access_token)\n                        window.location.href = \"/component/Dashboard\"\n\n                        this.setState({\n                            data: res.data.data,\n                            loading: false\n                        })\n                        if (res.data.status === true) {\n                            \n                            localStorage.setItem(\"userId\", res.data.access_token)\n                            localStorage.setItem(\"email\", res.data.email)\n                            localStorage.setItem('data', res.data.data)\n                        }\n\n\n                        localStorage.setItem(\"userId\", res.data.data.access_token)\n\n\n                        // axios({\n                        //     method: 'get',\n                        //     url: Serverurl + 'user',\n                        //     headers: {\n                        //         Authorization: 'Bearer' + ' ' + res.data.data.access_token\n                        //     }\n\n                        // })\n\n                        //     .then((response) => {\n                        //         console.log('User', response.data.data)\n                        //         // console.log(\"Type:\", response.data.data.user_type)\n                        //         console.log(\"userId:\", response.data.data.id)\n\n                        //         this.setState((res) => {\n                        //             if (res.status == false) {\n                        //                 this.setState({\n                        //                     errorText: data.message\n                        //                 })\n                        //                 if (data.errors) {\n                        //                     if (data.errors.email) {\n                        //                         if (data.errors.email.ERR_00001) {\n                        //                             this.setState({\n\n                        //                                 emailError: '* Email is required'\n                        //                             })\n                        //                         }\n\n                        //                         if (data.errors.email.ERR_00005) {\n                        //                             this.setState({\n\n                        //                                 emailError: '* Email is invalid'\n                        //                             })\n                        //                         }\n                        //                     }\n                        //                     if (data.errors.password) {\n                        //                         if (data.errors.password.ERR_00001) {\n                        //                             this.setState({\n\n                        //                                 passwordError: '* Password is required'\n                        //                             })\n                        //                         }\n                        //                     }\n                        //                 }\n                        //             }\n                        //         })\n\n                        //     })\n                        //     .catch((val) => {\n                        //         console.log(\"error:\", val)\n                        //     })\n\n\n                    })\n                    .catch((err) => {\n                        console.log({ err })\n                        if (err) {\n                            error.classList.add('errorMsg');\n                            this.setState({\n                                error: 'Login Failed! Please try again',\n                                loading: true\n                            })\n                            error.classList.add('errorMsg');\n                            setTimeout(() => {\n                                error.classList.remove('errorMsg')\n                                this.setState({\n                                    error: '',\n                                    loading: false\n                                })\n                            }, 3000)\n                        }\n                    })\n\n            }\n        }\n    }\n\n    onKeyDown = (event) => {\n        // 'keypress' event misbehaves on mobile so we track 'Enter' key via 'keydown' event\n        if (event.key === 'Enter') {\n            event.preventDefault();\n            event.stopPropagation();\n            this.Login();\n        }\n    }\n\n    render() {\n        // var userId = localStorage.getItem('/');\n        return (\n            <div>\n                <div>\n                    <div className=\"accountbg\"></div>\n                    <div className=\"wrapper-page\">\n                        <div className=\"card1\">\n                            <div className=\"card-body\">\n                                {/* <div id=\"err\">{this.state.error}</div> */}\n                                <div className=\"text-center\">\n                                    <a className=\"logo logo-admin\"><img src={logo2} height=\"60\" alt=\"logo\" /></a>\n                                </div>\n\n                                <div className=\"px-3 pb-3\">\n                                    <form className=\"form-horizontal m-t-20\" action=\"index.html\">\n\n                                        <div className=\"form-group row\">\n                                            <div className=\"col-12\">\n                                                <input className=\"form-control\" type=\"email\" name=\"email\" onChange={this.handleEmailChange.bind(this)} placeholder=\"Email\" required />\n                                            </div>\n                                        </div>\n\n                                        <div className=\"form-group row\">\n                                            <div className=\"col-12\">\n                                                <input className=\"form-control\" type=\"password\" name=\"password\" onChange={this.PasswordInput.bind(this)} placeholder=\"Password\" required />\n                                            </div>\n                                        </div>\n\n                                        {this.state.errorText ?\n                                            <p style={{ color: 'red' }}>{this.state.errorText}</p>\n                                            : null\n                                        }\n                                        <div className=\"form-group text-center row m-t-20\">\n                                            <div className=\"col-12\">\n                                                <button className=\"btn btn-danger btn-block waves-effect waves-light\" type=\"submit\" onClick={this.Login.bind(this)}>Log In</button>\n                                            </div>\n                                        </div>\n\n                                        <div className=\"form-group m-t-10 mb-0 row\">\n                                            <div className=\"col-sm-12 m-t-20 my-forgot\">\n                                                <a href=\"/component/TravelForgot\" className=\"text-muted\"><i className=\"mdi mdi-lock\"></i> <small>Forgot your password ?</small></a>\n                                            </div>\n                                        </div>\n                                    </form>\n                                </div>\n\n                            </div>\n                        </div>\n                    </div>\n                </div>\n\n            </div>\n\n        )\n    }\n}\n\nexport default TravelLogin\n"]},"metadata":{},"sourceType":"module"}